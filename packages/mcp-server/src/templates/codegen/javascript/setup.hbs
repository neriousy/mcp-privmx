/**
 * PrivMX WebEndpoint Setup - {{language}}
 * Generated by PrivMX MCP Server (Handlebars template)
 */

import { Endpoint } from '@privmx/privmx-webendpoint-sdk';

class PrivMXManager {
  constructor() {
    this.endpoint = null;
    this.connectionId = null;
    this.isConnected = false;
  }

  async initialize({ userPrivateKey, solutionId, bridgeUrl }) {
    await Endpoint.setup('/path/to/privmx-webendpoint-assets/');
    this.endpoint = new Endpoint();
    this.connectionId = await this.endpoint.connect({
      userPrivKey: userPrivateKey,
      solutionId,
      platformUrl: bridgeUrl,
    });
    this.isConnected = true;
  }

  isReady() {
    return this.isConnected && this.endpoint && this.connectionId;
  }

  /** Feature implementations **/
  {{#if (includes features "threads")}}
  {{> thread}}
  {{/if}}
  {{#if (includes features "stores")}}
  {{> store}}
  {{/if}}
  {{#if (includes features "inboxes")}}
  {{> inbox}}
  {{/if}}
  {{#if (includes features "crypto")}}
  {{> crypto}}
  {{/if}}
}

export { PrivMXManager }; 